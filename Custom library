local library = {}

-- Services
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "CustomUILib"
gui.ResetOnSpawn = false

-- Drag Function
local function dragify(frame)
	local dragging, offset
	frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			offset = input.Position - frame.Position
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			frame.Position = UDim2.new(0, input.Position.X - offset.X, 0, input.Position.Y - offset.Y)
		end
	end)
	UserInputService.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)
end

-- Main Window
function library:CreateWindow(titleText)
	local main = Instance.new("Frame", gui)
	main.Size = UDim2.new(0, 700, 0, 500)
	main.Position = UDim2.new(0.5, -350, 0.5, -250)
	main.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	main.BorderSizePixel = 0
	main.Name = "MainUI"

	local title = Instance.new("TextLabel", main)
	title.Text = titleText or "Title"
	title.Size = UDim2.new(0, 200, 0, 40)
	title.Position = UDim2.new(0, 20, 0, 10)
	title.TextColor3 = Color3.new(1, 1, 1)
	title.Font = Enum.Font.SourceSansBold
	title.TextSize = 32
	title.BackgroundTransparency = 1

	local close = Instance.new("TextButton", main)
	close.Text = "X"
	close.Size = UDim2.new(0, 30, 0, 30)
	close.Position = UDim2.new(1, -40, 0, 10)
	close.BackgroundTransparency = 1
	close.TextColor3 = Color3.new(1, 1, 1)
	close.Font = Enum.Font.SourceSansBold
	close.TextSize = 24
	close.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)

	dragify(main)

	local currentTab = nil
	local tabList = {}

	-- Tab Creation
	local function createTab(tabName)
		local tabButton = Instance.new("TextButton", main)
		tabButton.Size = UDim2.new(0, 160, 0, 50)
		tabButton.Position = UDim2.new(0, 20, 0, 60 + #tabList * 60)
		tabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		tabButton.Text = tabName
		tabButton.Font = Enum.Font.SourceSansBold
		tabButton.TextSize = 26
		tabButton.TextColor3 = Color3.new(1, 1, 1)

		local tabContent = Instance.new("Frame", main)
		tabContent.Size = UDim2.new(0, 470, 0, 400)
		tabContent.Position = UDim2.new(0, 200, 0, 60)
		tabContent.BackgroundTransparency = 1
		tabContent.Visible = false
		tabContent.Name = "TabContent_" .. tabName

		tabButton.MouseButton1Click:Connect(function()
			if currentTab then
				currentTab.Visible = false
			end
			tabContent.Visible = true
			currentTab = tabContent
		end)

		table.insert(tabList, tabButton)

		if #tabList == 1 then
			tabContent.Visible = true
			currentTab = tabContent
		end

		local sections = {}
		local sectionYOffset = 0

		return {
			AddSection = function(_, sectionName)
				local sectionLabel = Instance.new("TextLabel", tabContent)
				sectionLabel.Size = UDim2.new(1, 0, 0, 40)
				sectionLabel.Position = UDim2.new(0, 0, 0, sectionYOffset)
				sectionLabel.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
				sectionLabel.Text = sectionName
				sectionLabel.Font = Enum.Font.SourceSansBold
				sectionLabel.TextSize = 26
				sectionLabel.TextColor3 = Color3.new(1, 1, 1)
				sectionYOffset += 50

				local buttonYOffset = sectionYOffset

				return {
					AddButton = function(_, buttonText, callback)
						local button = Instance.new("TextButton", tabContent)
						button.Size = UDim2.new(1, 0, 0, 50)
						button.Position = UDim2.new(0, 0, 0, buttonYOffset)
						button.BackgroundColor3 = Color3.fromRGB(160, 160, 160)
						button.Text = buttonText
						button.Font = Enum.Font.SourceSansBold
						button.TextSize = 26
						button.TextColor3 = Color3.new(1, 1, 1)
						button.MouseButton1Click:Connect(callback)

						local icon = Instance.new("ImageLabel", button)
						icon.Size = UDim2.new(0, 30, 0, 30)
						icon.Position = UDim2.new(1, -40, 0.5, -15)
						icon.BackgroundTransparency = 1
						icon.Image = "rbxassetid://00000000" -- Change this to a valid fingerprint image

						buttonYOffset += 60
						sectionYOffset = buttonYOffset
					end
				}
			end
		}
	end

	return {
		AddTab = function(_, name)
			return createTab(name)
		end
	}
end

return library
