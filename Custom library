local library = {}

-- Services
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

-- Setup
local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "CustomUILib"
gui.ResetOnSpawn = false

-- Drag Function
local function dragify(frame)
	local dragging, offset
	frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			offset = input.Position - frame.Position
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			frame.Position = UDim2.new(0, input.Position.X - offset.X, 0, input.Position.Y - offset.Y)
		end
	end)
	UserInputService.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)
end

-- Main Window
function library:CreateWindow(titleText)
	local main = Instance.new("Frame", gui)
	main.Size = UDim2.new(0, 700, 0, 400)
	main.Position = UDim2.new(0.5, -350, 0.5, -200)
	main.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	main.BorderSizePixel = 0

	local title = Instance.new("TextLabel", main)
	title.Text = titleText or "Title"
	title.Size = UDim2.new(0, 200, 0, 40)
	title.Position = UDim2.new(0, 20, 0, 10)
	title.TextColor3 = Color3.new(1, 1, 1)
	title.Font = Enum.Font.SourceSansBold
	title.TextSize = 32
	title.BackgroundTransparency = 1

	local close = Instance.new("TextButton", main)
	close.Text = "X"
	close.Size = UDim2.new(0, 30, 0, 30)
	close.Position = UDim2.new(1, -40, 0, 10)
	close.BackgroundTransparency = 1
	close.TextColor3 = Color3.new(1, 1, 1)
	close.Font = Enum.Font.SourceSansBold
	close.TextSize = 24
	close.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)

	dragify(main)

	return {
		Main = main,
		AddTab = function(_, tabName)
			local tab = Instance.new("TextButton", main)
			tab.Size = UDim2.new(0, 160, 0, 50)
			tab.Position = UDim2.new(0, 20, 0, 60)
			tab.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
			tab.Text = tabName
			tab.Font = Enum.Font.SourceSansBold
			tab.TextSize = 26
			tab.TextColor3 = Color3.new(1, 1, 1)

			return {
				AddSection = function(_, sectionName)
					local section = Instance.new("TextLabel", main)
					section.Size = UDim2.new(0, 400, 0, 50)
					section.Position = UDim2.new(0, 200, 0, 60)
					section.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
					section.Text = sectionName
					section.Font = Enum.Font.SourceSansBold
					section.TextSize = 26
					section.TextColor3 = Color3.new(1, 1, 1)

					return {
						AddButton = function(_, buttonText, callback)
							local button = Instance.new("TextButton", main)
							button.Size = UDim2.new(0, 400, 0, 50)
							button.Position = UDim2.new(0, 200, 0, 120)
							button.BackgroundColor3 = Color3.fromRGB(160, 160, 160)
							button.Text = buttonText
							button.Font = Enum.Font.SourceSansBold
							button.TextSize = 26
							button.TextColor3 = Color3.new(1, 1, 1)
							button.MouseButton1Click:Connect(callback)

							local fingerprint = Instance.new("ImageLabel", button)
							fingerprint.Size = UDim2.new(0, 30, 0, 30)
							fingerprint.Position = UDim2.new(1, -40, 0.5, -15)
							fingerprint.BackgroundTransparency = 1
							fingerprint.Image = "rbxassetid://00000000" -- üîÅ Replace with fingerprint asset ID
						end
					}
				end
			}
		end
	}
end

return library
