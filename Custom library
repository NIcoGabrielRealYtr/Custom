-- ApeiroLib.lua
local ApeiroLib = {}

function ApeiroLib:CreateWindow(titleText)
    local gui = Instance.new("ScreenGui", game.CoreGui)
    gui.Name = "ApeiroLib"

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0, 450, 0, 320)
    frame.Position = UDim2.new(0.5, -225, 0.5, -160)
    frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    frame.BorderSizePixel = 0

    local title = Instance.new("TextLabel", frame)
    title.Size = UDim2.new(1, 0, 0, 40)
    title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 22
    title.Text = titleText or "Apeirophobia UI"

    local tabFrame = Instance.new("Frame", frame)
    tabFrame.Size = UDim2.new(0, 130, 1, -40)
    tabFrame.Position = UDim2.new(0, 0, 0, 40)
    tabFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

    local mainContent = Instance.new("Frame", frame)
    mainContent.Size = UDim2.new(1, -130, 1, -40)
    mainContent.Position = UDim2.new(0, 130, 0, 40)
    mainContent.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

    local tabs = {}

    function ApeiroLib:CreateTab(name)
        local tabBtn = Instance.new("TextButton", tabFrame)
        tabBtn.Size = UDim2.new(1, 0, 0, 30)
        tabBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        tabBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabBtn.Text = name
        tabBtn.Font = Enum.Font.SourceSans
        tabBtn.TextSize = 18

        local contentFrame = Instance.new("Frame", mainContent)
        contentFrame.Size = UDim2.new(1, 0, 1, 0)
        contentFrame.BackgroundTransparency = 1
        contentFrame.Visible = false

        local layout = Instance.new("UIListLayout", contentFrame)
        layout.Padding = UDim.new(0, 5)

        table.insert(tabs, {btn = tabBtn, frame = contentFrame})

        tabBtn.MouseButton1Click:Connect(function()
            for _, tab in pairs(tabs) do
                tab.frame.Visible = false
                tab.btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            end
            contentFrame.Visible = true
            tabBtn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        end)

        if #tabs == 1 then
            contentFrame.Visible = true
            tabBtn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        end

        local tabAPI = {}

        function tabAPI:AddButton(text, callback)
            local btn = Instance.new("TextButton", contentFrame)
            btn.Size = UDim2.new(1, -10, 0, 35)
            btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            btn.TextColor3 = Color3.fromRGB(255, 255, 255)
            btn.Text = text
            btn.Font = Enum.Font.SourceSans
            btn.TextSize = 16
            btn.MouseButton1Click:Connect(function()
                pcall(callback)
            end)
        end

        return tabAPI
    end

    return ApeiroLib
end

return ApeiroLib
